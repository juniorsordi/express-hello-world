<div class="row">
    
    <link rel="stylesheet" href="//mgcrea.github.io/angular-strap/styles/libs.min.css">
    <div class="col-md-12" id="newProject" ng-init="initNewProject()">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title" translate>New Project</h5>
                <p class="card-text">
                <form>
                    <div ng-repeat="field in fields" class="mb-3 mt-3">
                        <label for="field{{ $index }}" class="form-label" translate>{{ field.name }}</label>
                        <input ng-if="field.type == 'text'" id="field{{ $index }}" class="form-control" type="text" ng-model="form[field.name]" />
                        <input ng-if="field.type == 'number'" id="field{{ $index }}" class="form-control" type="number" ng-model="form[field.name]" />
                        <div ng-if="field.type == 'checkbox'" class="form-check">
                          <label class="form-check-label">
                            <input type="checkbox" class="form-check-input" id="field{{ $index }}" value="checkedValue" checked ng-model="form[field.name]"/>
                          </label>
                        </div>
                        <input ng-if="field.type == 'date'" id="field{{ $index }}" class="form-control" type="date" ng-model="form[field.name]" />
                        <span ng-if="field.type == 'select'">
                            <select id="field{{ $index }}" class="form-control" ng-model="form[field.name]" ng-options="item.id as item.name for item in field.values" select2>
                                <option value=""></option>
                            </select>
                        </span>
                    </div>
                    <div class="mb-3">
                        <label><i class="fa fa-home"></i> Address <small>(async via maps.googleapis.com)</small></label>
                        <input type="text" class="form-control" ng-model="selectedAddress" data-animation="am-flip-x"
                            bs-options="address.formatted_address as address.formatted_address for address in getAddress($viewValue)"
                            placeholder="Enter address" bs-typeahead>
                    </div>
                    <div class="mb-3">
                        <input type="text" class="form-control" id="country2" placeholder="Search User" autocomplete="off" ng-model="country2" ng-change="userTypeahead(country2)">
                    </div>
                    <hr>
                    Users:<br>
                    <span ng-repeat="user in selectedUsers">
                        {{ user.name }}<br>
                    </span>
                </form>
                <button class="btn btn-primary" type="button" ng-click="saveNewProject(form)" translate>Save</button>
                </p>
            </div>
        </div>
        <script>
            /*
            const temp1 = new Autocomplete(document.getElementById('country2'), {
                    data: [],
                    onSelectItem: ({ label, value }) => {
                        //$scope.selectedUsers.push({ name: label, id: value });
                        document.getElementById('country2').value = "";
                        angular.element(document.getElementById('newProject')).scope().addUser(label, value);
                    },
                    maximumItems: 10,
                    highlightTyped: true,
                    highlightClass: 'fw-bold text-primary'
                });
                //*/
        </script>
    </div>
</div>